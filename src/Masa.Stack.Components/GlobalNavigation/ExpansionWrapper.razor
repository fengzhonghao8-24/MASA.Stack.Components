@namespace Masa.Stack.Components.GlobalNavigation

<div class="global-nav-content__main">
    @foreach (var category in Categories!)
    {
        category.BindValues ??= CategoryCodes.TryGetValue(category.Code, out var values)
            ? values
            : new List<StringNumber>();

        <CascadingValue Value="this">
            <ExpansionCategory Category="category" Checkable="@Checkable" Context="app">
                <ExpansionApp App="app"
                              CategoryCode="@category.Code"
                              Checkable="@Checkable"
                              FavoriteNavs="@FavoriteNavs" />
            </ExpansionCategory>
        </CascadingValue>
    }
</div>

<div class="global-nav-content__side">
    <MTimeline AlignTop Dense>
        @foreach (var category in Categories)
        {
            <MTimelineItem Left Small FillDot>
                <IconContent>
                    <span>
                    </span>
                </IconContent>
                <ChildContent>
                    <MButton Small Plain Ripple="false"
                             Class="pa-0 masa-text-2-2" Style="height: initial"
                             OnClick="@(() => ScrollTo(category.TagId(), ".global-nav-content__main"))">
                        @category.Name
                    </MButton>
                </ChildContent>
            </MTimelineItem>

            @foreach (var app in category.Apps)
            {
                <MTimelineItem Left Color="white" Small FillDot>
                    <IconContent>
                        <span class="secondary-dot_wrapper">
                        </span>
                    </IconContent>
                    <ChildContent>
                        <MButton Small Plain Ripple="false"
                                 Class="pa-0 masa-text-2-2" Style="height: initial"
                                 MinWidth="0"
                                 OnClick="@(() => ScrollTo(app.TagId(category.Code), ".global-nav-content__main"))">
                            @app.Name
                        </MButton>
                    </ChildContent>
                </MTimelineItem>
            }
        }
    </MTimeline>
</div>
